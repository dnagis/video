###Objectif de départ: un element fait à partir du template videofilter pour aller vers videorate
##(avec la notion que videofilter et videorate héritent d'une classe basetransform)

##Stratégie initiale:
#Créer un element perso à partir du template videofilter
#Le faire fonctionner entre un décodeur et un encodeur pour qu'il traite les frames en raw une par une
#Essai Piste: valeur retournée par videorate dans la fonction gst_video_rate_transform_ip() GST_BASE_TRANSFORM_FLOW_DROPPED

##LOG
# Créer un element perso à partir du template videofilter
--> sed de chez GNU cf LOG_element_perso_main
--> gst-plugins-bad/tools -->gst-element-maker my_element videofilter
--> le voir fonctionner:
gst-launch-1.0 --gst-plugin-path=/initrd/mnt/dev_save/packages/gst-plugins-bad-1.18.1/tools videotestsrc is-live=true ! myelement ! fakesink

# Le faire fonctionner entre un décodeur et un encodeur pour qu'il traite les raw frames une par une

-Créer un fichier video avec 300 buffers
gst-launch-1.0 videotestsrc num-buffers=100 ! vaapih264enc ! h264parse ! mp4mux ! filesink location=in.mp4

-Une pipeline qui décode et réencode 
gst-launch-1.0 filesrc location=in.mp4 ! qtdemux ! h264parse ! vaapih264dec ! vaapih264enc ! h264parse ! mp4mux ! filesink location=out.mp4

-La même pipeline avec mon element au milieu
gst-launch-1.0 --gst-plugin-path=/initrd/mnt/dev_save/packages/gst-plugins-bad-1.18.1/tools filesrc location=in.mp4 ! qtdemux ! h264parse ! vaapih264dec ! myelement ! vaapih264enc ! h264parse ! mp4mux ! filesink location=out.mp4

--> not linked
--> j'essaie d'ajouter les elements un par un
bloque à partir de: vaapih264enc derrière myelement

j'essaie d'ajouter queue : entre myelement et encodeur: non

--> est ce que videorate OK?
gst-launch-1.0 --gst-plugin-path=/initrd/mnt/dev_save/packages/gst-plugins-bad-1.18.1/tools filesrc location=in.mp4 ! qtdemux ! h264parse ! vaapih264dec ! videorate ! vaapih264enc ! h264parse ! mp4mux ! filesink location=out.mp4
oui

--> j'essaie -vvvv
gst-launch-1.0 -vvvv --gst-plugin-path=/initrd/mnt/dev_save/packages/gst-plugins-bad-1.18.1/tools filesrc location=in.mp4 ! qtdemux ! h264parse ! vaapih264dec ! myelement ! vaapih264enc ! h264parse ! mp4mux ! filesink location=out.mp4
--> ne donne rien

--> est ce que le format qui sort de mon element convient à vaapih264enc?
--> je n'ai pas not negotiated

